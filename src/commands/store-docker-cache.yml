description: >
  This command generates docker cache key
parameters:
  key-docker:
    type: string
    default: docker-layer-caching-key-{{ checksum "/tmp/docker-layer-caching-key.txt" }}
    description: "Cache key"
  key-docker-lock:
    type: string
    default: docker-layer-caching-key-{{ checksum "/tmp/docker-layer-caching-key.txt" }}-{{ checksum "poetry.lock" }}-{{ checksum "Gemfile.lock" }}
    description: "Cache key"
  paths:
    type: string
    default: /tmp/docker-layer-caching-key.txt
    description: "Cache paths"
steps:
  - save_cache:
      key: <<parameters.key-docker>>
      paths:
        - <<parameters.paths>>
  - save_cache:
      key: <<parameters.key-docker-lock>>
      paths:
        - <<parameters.paths>>
