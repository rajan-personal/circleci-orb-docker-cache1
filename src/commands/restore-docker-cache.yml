description: >
  This command restores docker cache
parameters:
  key_docker:
    type: string
    default: docker-layer-caching-key-{{ checksum "/tmp/docker-layer-caching-key.txt" }}
    description: "Cache key to restore"
steps:
  - run:
      name: generate checksum for lock file
      command: <<include(scripts/checksum-lock.sh)>>
  - run:
    name: generate checksum key
    command: checksum_key=$(cat /tmp/checksum_key)
    environment:
      CHECKSUM_KEY: $checksum_key
  - restore_cache:
      keys:
        - <<parameters.key_docker>>-{{ env.CHECKSUM_KEY }}
        - <<parameters.key_docker>>
